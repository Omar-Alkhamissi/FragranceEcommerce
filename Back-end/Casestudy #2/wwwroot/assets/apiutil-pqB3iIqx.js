const c="",p=t=>{const r=String(t).replace(/^\/+/,"");return r.toLowerCase().startsWith("api/")?`/${r}`:`/api/${r}`},l=async t=>{let r;const s=i(),a=`${c}${p(t)}`;console.log("GET ->",a);try{const o=await fetch(a,{method:"GET",headers:s});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.text();r=e?JSON.parse(e):{error:"Empty response from server"}}catch(o){console.log(o),r={error:`Error has occurred: ${o.message}`}}return r},u=async(t,r)=>{let s;const a=i(),o=`${c}${p(t)}`;console.log("POST ->",o,r);try{const e=await fetch(o,{method:"POST",headers:a,body:JSON.stringify(r)});if(console.log("POST status ->",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();s=n?JSON.parse(n):{error:"Empty response from server"}}catch(e){console.log(e),s={error:`Error has occurred: ${e.message}`}}return s},i=()=>{const t=new Headers;t.append("Content-Type","application/json");const r=sessionStorage.getItem("customer");if(r)try{const s=JSON.parse(r);s?.token&&t.append("Authorization","Bearer "+s.token)}catch{}return t};export{l as f,u as p};
